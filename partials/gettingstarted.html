<div class="container">
	<div class="row">
		<div class="col-md-12">
			<h1>Getting Started</h1>
			<hr/>

			<h2>Dependencies</h2>			
			<p>The only dependency is <a href="http://angularjs.org">AngularJS</a>.</p>
			<p>Tested against v1.2.7 but other versions should work.</p>
			
			<h2>Installation</h2>
			<p>Decalare a dependency on the <code>angular-authz</code> module.</p>
			<div hljs>angular.module('myModule', ['angular-authz']);</div>

			<h2>Set Permissions</h2>
			<p>Permissions are set as a string array.  Keep reading to learn how other permission formats are supported.</p>
			<div hljs>authz.setPermissions(['fooPermissionString', 'barPermissionString']);</div>
			<p>Wildcard permssions let you protect resources at the instance level.  This is the default permission type in <code>angular-authz</code>.</p>
			
			<div hljs>authz.setPermission(['car:drive:corvette']); // drive the corvette car
authz.setPermission(['car:drive:corvette', 'car:park:transam']); // drive the corvette car, park the transam car
authz.setPermission(['car:*:corvette']); // do anything on the corvette car
authz.setPermission(['car:*']); // drive any car
authz.setPermission(['car:*', 'truck:drive:*']); // do anything on any car, drive any truck</div>

			<p>Custom permission resolvers allow you to support your own permission formats.</p>
			<div hljs>
angular.module('app').config(function(authzProvider) {
  function MyPermission(permissionInYourFormat) {
    this._parsed = parse(permissionInYourFormat);
    this.implies = function(otherMyPermission) {
      return this._parsed = otherMyPermission._parsed;
    };
  }

  authzProvider.setResolver({
    resolve: function(permissionInYourFormat) {
      return new MyPermission(permissionInYourFormat);			
    };
  });
});</div>	
			
			<h3>Before AngularJS bootstrapping</h3>
			<p>
				Many applications prefer to retrieve permissions before angular is bootstraped.  
				This way authorization is ready before the angular app is initialized.  Using only
				this method requires retrieving all permissions for the current client.  If this is
				to heavy for you, then keep reading.
			</p>
			<div hljs>
<script type="text/javascript">
				
  angular.element(document).ready(function() {
    $.get('query/for/permissions', function(permissions) {
      angular.module('app').config(function(authzProvider) {
        var permissions = queryForPermissions();
        authzProvider.setPermissions(permissions);
      });
      angular.bootstrap(document, ['app']);
    });
  });

</script></div>

			<h3>After AngularJS bootstrapping</h3>
			<p>
				Some applications can't query for all permissions once or just need to change permissions when visiting different pages.
			</p>
			<h4>During route resolution</h4>
			<p>This example uses <a href="https://github.com/angular-ui/ui-router">ui-router</a> but default angular $routeProvider has similiar constructs.</p>
			<div hljs>
angular.module('app').config(function($stateProvider) {
  $stateProvider
    .state('team', {url: '/team/{teamId}', templateUrl: 'partials/team.html',
      resolve: {
        something: function($stateParams, authz) {
          var teamPermissions = queryForTeamPermissions($stateParams.teamId); 
          authz.setPermissions(teamPermissions);
        }
      }
    })
    .state('admin', {url: '/admin', templateUrl: 'partials/admin.html',
      resolve: {
        something: function($stateParams, authz) {
          var adminPermissions = queryForAdminPermissions(); 
          authz.setPermissions(adminPermissions);
        }
      }
    })    
});</div>

			<h4>During controller instantiation</h4>
			<p>I've never done this, but it's possible</p>
			<div hljs>
angular.module('app').controller('FooController', function(authz) {
  this.init = function() {
    var fooPermissions = queryForFooPermissions(); 
    authz.setPermissions(fooPermissions);
  };
});</div>
			
			<h2>Protecting Resources</h2>
			<p>Once you've set permissions for the current client, you can protect resources.</p>

			<h3>Directives</h3>
			<div hljs >
<!-- display if permission exists -->
<div has-permission="printer:print:inket3000">
  You can print on the inkjet3000 printer
</div>

<!-- display if permission does not exist -->
<div has-not-permission="printer:print:inket3000">
  You don't have access to print on the inkjet3000 print
</div>

<!-- use the scope -->
<div has-permission="printer:print:{{printerModel.currentPrinter.id}}">
  You can print on the {{printerModel.currentPrinter.name}} printer
</div></div>

			<h3>Programatically</h3>
			<div hljs>
angular.module('app').controller('BarController', function(authz) {
  this.doSomeBar = function() {
    if (! authz.hasPermission('barpermission')) {
      // get em outa here
    }
  };
});</div>
		</div>
	</div>
</div>